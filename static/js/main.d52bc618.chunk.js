(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(55)},33:function(e,t,a){},44:function(e,t){},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){e.exports=a.p+"static/media/logo.63207fb8.svg"},51:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(14),l=a.n(r),u=a(1),s=a(11),i=(a(33),a(3)),o=a(17),d=a.n(o),m=a(18),p=function(e,t,a){e({type:"REQUEST_PENDING"}),fetch("http://go-dev.greedygame.com/v3/dummy/report?startDate=".concat(t,"&endDate=").concat(a)).then(function(e){return e.json()}).then(function(t){fetch("http://go-dev.greedygame.com/v3/dummy/apps").then(function(e){return e.json()}).then(function(a){window.__appName=a,window.__data=t.data,e({type:"REQUEST_SUCCESS",payload:{cache_time:t.cache_time,data:t.data,appName:a.data}})})}).catch(function(t){return e({type:"REQUEST_FAILED",payload:t})})},E=function(e,t){e({type:"START_DATE_CHANGE",payload:t})},f=function(e,t){e({type:"END_DATE_CHANGE",payload:t})},g=function(e,t){e({type:"ENABLE_CHANGE",payload:t})},b=a(4),h=(a(46),function(e){var t=e.setEnable,a=e.requestData,r=e.startDate,l=e.endDate,s=e.defaultenableVal,o=e.setToggle,d=Object(u.b)(),m=Object(n.useState)(s),p=Object(i.a)(m,2),E=p[0],f=p[1],g=Object(n.useState)(s),h=Object(i.a)(g,2),y=h[0],D=h[1],v=c.a.useRef(),N=c.a.useRef(),O=function(){var e=Object(b.a)(E),t=e.splice(v.current,1)[0];e.splice(N.current,0,t),v.current=null,N.current=null,f(e)},j=function(e){var t=e.target,a=t.name,n=t.checked;D(n?[].concat(Object(b.a)(y),[a]):y.filter(function(e){return e!==a}))};function S(e){return y.includes(e)}return c.a.createElement("div",{className:"container"},c.a.createElement("h3",null,"Dimensions and Metrics"),c.a.createElement("div",{className:"yuhh"},E.map(function(e,t){return c.a.createElement("div",{className:"checkbox",key:t,draggable:!0,onDragStart:function(e){return v.current=t},onDragEnter:function(e){return N.current=t},onDragEnd:O,onDragOver:function(e){return e.preventDefault()}},c.a.createElement("label",null,c.a.createElement("input",{id:t,name:e,type:"checkbox",checked:S(e),onChange:j}),c.a.createElement("span",null,e)))})),c.a.createElement("button",{onClick:function(){var e=E.filter(function(e){return y.includes(e)});a(d,r,l),t(d,e)},className:"apply"},"Apply"),c.a.createElement("button",{className:"close",onClick:function(){o(!1)}},"Close"))}),y=(a(48),function(){return c.a.createElement("div",{className:"error"},c.a.createElement("img",{src:a(50),alt:"No Data found "}),c.a.createElement("div",{className:"text"},c.a.createElement("h1",null,"Hey! Something's off!"),c.a.createElement("h1",null,"We couldn't display the given data."),c.a.createElement("h3",null,"Try changing your filters or selecting a different date")))}),D=(a(51),a(53),function(e){var t=e.enableVal,a=e.isPending,n=e.data,r=e.appName;return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Date"),c.a.createElement("th",null,"App Name"),t.map(function(e,t){return c.a.createElement("th",{key:t},e)}))),c.a.createElement("tbody",null,a?c.a.createElement("td",null,"Loading"):n.map(function(e,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",null,function(e){var t=new Date(e),a=t.toLocaleString("default",{month:"long"});return"".concat(t.getDate()," ").concat(a," ").concat(t.getFullYear())}(e.date)),r.map(function(t,a){if(t.app_id===e.app_id)return c.a.createElement("td",{key:a},t.app_name)}),t.map(function(t,a){switch(t){case"Clicks":return c.a.createElement("td",{key:a},e.clicks);case"AD Requests":return c.a.createElement("td",{key:a},e.requests);case"AD Responses":return c.a.createElement("td",{key:a},e.responses);case"Impressions":return c.a.createElement("td",{key:a},e.impressions);case"Revenue":return c.a.createElement("td",{key:a},e.revenue.toFixed(2));case"Fill Rate":return c.a.createElement("td",{key:a},(e.requests/e.responses*100).toFixed(2));case"CTR":return c.a.createElement("td",{key:a},(e.clicks/e.impressions*100).toFixed(2));default:return null}}))})))}),v=a(19),N=function(){var e=Object(u.b)(),t=Object(m.a)(),a=Object(u.c)(function(e){return e.requestData.isPending}),r=(Object(u.c)(function(e){return e.requestData.cache_time}),Object(u.c)(function(e){return e.requestData.data})),l=Object(u.c)(function(e){return e.requestData.appName}),s=Object(u.c)(function(e){return e.setStartDate.startDate}),o=Object(u.c)(function(e){return e.setEndDate.endDate}),b=Object(u.c)(function(e){return e.setEnable.enableVal}),N=Object(u.c)(function(e){return e.requestData.error}),O=Object(n.useState)(!1),j=Object(i.a)(O,2),S=j[0],_=j[1];Object(n.useEffect)(function(){p(e,"2020-12-11","2020-12-12");var a=t.location.search.substr(1),n=d.a.parse(a);a.count&&(E(e,String(n.startDate)),f(e,String(n.endDate)),g(e,Array(n.enableVal)))},[N]);var k=function(t){"startDate"===t.target.id?E(e,t.target.value):f(e,t.target.value)};return Object(n.useEffect)(function(){t.push("?startDate=".concat(s))},[s]),Object(n.useEffect)(function(){t.push("?endDate=".concat(o))},[s]),Object(n.useEffect)(function(){t.push("?enableVal=".concat(b))},[b]),c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"bar"}),c.a.createElement("div",{className:"header"},c.a.createElement("h1",null,"Analytics")),c.a.createElement("div",{className:"settings"},c.a.createElement("input",{id:"startDate",type:"date",value:s,onChange:function(e){k(e)}}),c.a.createElement("input",{id:"endDate",type:"date",value:o,onChange:function(e){k(e)}}),c.a.createElement("button",{onClick:function(){_(!S)}},c.a.createElement(v.a,{className:"settingsIcon"}),"Settings"),S?c.a.createElement(h,{setEnable:g,requestData:p,startDate:s,endDate:o,defaultenableVal:b,setToggle:_}):console.log("none")),0!==Object.keys(r).length?c.a.createElement("div",{className:"table"},c.a.createElement(D,{enableVal:b,isPending:a,data:r,appName:l})):c.a.createElement("div",{className:"errorBoundary",styles:{marginTop:S?"120px":"10px"}},c.a.createElement(y,null)))},O={isPending:!1,cache_time:0,data:[],error:"",appName:[]},j={startDate:"2020-12-11"},S={endDate:"2020-12-12"},_={enableVal:["Clicks","AD Requests","AD Responses","Impressions","Revenue","Fill Rate","CTR"]},k=Object(s.a)({requestData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"REQUEST_PENDING":return Object.assign({},e,{isPending:!0});case"REQUEST_SUCCESS":return Object.assign({},e,{data:t.payload.data,isPending:!1,appName:t.payload.appName,cache_time:t.payload.cache_time});case"REQUEST_FAILED":return Object.assign({},e,{error:t.payload,isPending:!1});default:return e}},setEnable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ENABLE_CHANGE":return Object.assign({},e,{enableVal:t.payload});default:return e}},setStartDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"START_DATE_CHANGE":return Object.assign({},e,{startDate:t.payload});default:return e}},setEndDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"END_DATE_CHANGE":return Object.assign({},e,{endDate:t.payload});default:return e}}}),A=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),C=Object(s.b)(k,A);C.subscribe(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}(C.getState())}),l.a.createRoot(document.getElementById("root")).render(c.a.createElement(u.a,{store:C},c.a.createElement(N,null)))}},[[20,2,1]]]);
//# sourceMappingURL=main.d52bc618.chunk.js.map